#pragma checksum "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d7118e14d2b2f1170a992c37261a53fc2efe83b2"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Users_SearchUsers), @"mvc.1.0.view", @"/Views/Users/SearchUsers.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Nik\source\repos\WorkManagement\Views\_ViewImports.cshtml"
using WorkManagement;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nik\source\repos\WorkManagement\Views\_ViewImports.cshtml"
using WorkManagement.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
using WorkManagement.Models.Shared;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d7118e14d2b2f1170a992c37261a53fc2efe83b2", @"/Views/Users/SearchUsers.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"23b10c7561d56213c33131b7a562a1cb938daa29", @"/Views/_ViewImports.cshtml")]
    public class Views_Users_SearchUsers : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<WorkManagement.Models.Shared.SessionHelper>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
  
    ViewData["Title"] = "חיפוש משתמשים";
    var sessionUser = Model;

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div style=\"position: absolute;\">\r\n");
#nullable restore
#line 9 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
     if (sessionUser.IsAdmin)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <h3>חפש משתמשים</h3>\r\n");
            WriteLiteral(@"        <table>
            <tr>
                <td>
                    <div class=""align-right"">
                        <input id=""userId"" type=""text"" class=""numbers-only form-fields form-validation"" />
                        <span>מזהה משתמש </span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class=""align-right"">
                        <input id=""phoneNumber"" type=""text"" class=""numbers-only form-fields form-validation"" />
                        <span>מספר טלפון </span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class=""align-right"">
                        <input id=""active"" type=""radio"" name=""active"" class=""form-fields"" />
                        <span>הבא רק משתמשים פעילים </span>
                    </div>
                    <div class=""align-right"">
                        <input id=""notActive"" type=""rad");
            WriteLiteral(@"io"" name=""active"" class=""form-fields"" />
                        <span>הבא רק משתמשים הלא פעילים </span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class=""align-right"">
                        <input id=""isAdmin"" type=""radio"" name=""isAdmin"" class=""form-fields"" />
                        <span>הבא רק את אדמיניסטרטורים </span>
                    </div>
                    <div class=""align-right"">
                        <input id=""isNotAdmin"" type=""radio"" name=""isAdmin"" class=""form-fields"" />
                        <span>הבא רק את הלא אדמיניסטרטורים </span>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class=""align-right"">
                        <input id=""bringAll"" type=""checkbox"" />
                        <span>הבא את כל המשתמשים </span>
                    </div>
                </td>
            </tr>
        ");
            WriteLiteral(@"</table>
        <input type=""button"" 
               value=""חפש משתמשים"" 
               id=""usersSearchButton"" 
               class=""btn-primary"" 
               disabled style=""background-color: grey; border-color: grey;"" />
        <div id=""usersError"" style=""color: red; font-size: 14px; min-height: 10px; visibility: hidden;""></div>
");
            WriteLiteral(@"        <table id=""usersTable"" style=""visibility: hidden;"">
            <tr>
                <th class=""th-style"">מזהה משתמש</th>
                <th class=""th-style"">מספר טלפון</th>
                <th class=""th-style"">שם</th>
                <th class=""th-style"">שם משפחה</th>
                <th class=""th-style"">פעיל</th>
                <th class=""th-style"">אדמין</th>
                <th class=""th-style"">מחיקת משתמש</th>
            </tr>
            <tbody id=""users""></tbody>
        </table>
");
#nullable restore
#line 82 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
    }
    else
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <h3 style=\"color: red;\">אין לך הרשאות לעמוד הזה</h3>\r\n");
#nullable restore
#line 86 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"</div>

<script type=""text/javascript"">
    $(document).ready(function () {
        $(""#usersSearchButton"").on(""click"", function () {
            var usersTable = $(""#usersTable"");
            var userId = $(""#userId"").val();
            var phoneNumber = $(""#phoneNumber"").val();
            var bringAll = $(""#bringAll"");
            var usersError = $(""#usersError"");

            $(usersTable).css(""visibility"", ""hidden"");
            $(usersError).css(""visibility"", ""hidden"");
            $(""#users"").empty();

            if ($(bringAll).is("":checked"") || userId != """" || $(phoneNumber).val() != """") {
                $.ajax({
                    url: """);
#nullable restore
#line 104 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
                     Write(string.Format("{0}{1}", DomainHelper.BaseDomainUrl, Url.Action("GetUsers", "Users")));

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    type: ""get"",
                    data: {
                        userId: userId != """" ? parseInt(userId) : null,
                        phoneNumber: phoneNumber != """" ? phoneNumber : null,
                        active: $(""#active"").is("":checked"") ? true : ($(""#notActive"").is("":checked"") ? false : null),
                        isAdmin: $(""#isAdmin"").is("":checked"") ? true : ($(""#isNotAdmin"").is("":checked"") ? false : null),
                        bringAll: $(bringAll).is("":checked"") ? true : false
                    },
                    success: function (result) {
                        if (result.data != null) {
                            if (result.errorDesc != null && result.errorDesc != """") {
                                $(usersError).text(result.errorDesc);
                                $(usersError).css(""visibility"", ""visible"");
                            }
                            else if (result.data.length > 0) {
                                ");
            WriteLiteral(@"$(""#usersTableRow"").tmpl(result.data).appendTo($(""#users""));
                                $(usersTable).css(""visibility"", ""visible"");
                            }
                        }
                        else if (result.errorDesc != null && result.errorDesc != """") {
                            $(usersError).text(result.errorDesc);
                            $(usersError).css(""visibility"", ""visible"");
                        }
                    }
                });
            }
        });

        $(""#bringAll"").on(""click"", function () {
            if ($(this).is("":checked"")) {
                $("".form-fields"").prop(""disabled"", true);
                $(""#usersSearchButton"").prop(""disabled"", false);
                $(""#usersSearchButton"").css(""background-color"", ""#007bff"");
                $(""#usersSearchButton"").css(""border-color"", ""#007bff"");
            }
            else {
                $("".form-fields"").prop(""disabled"", false);
                $(""#usersSearchButt");
            WriteLiteral(@"on"").prop(""disabled"", true);
                $(""#usersSearchButton"").css(""background-color"", ""grey"");
                $(""#usersSearchButton"").css(""border-color"", ""grey"");
            }
        });

        $("".form-validation"").on(""input"", function () {
            if ($(this).val() != """") {
                $(""#usersSearchButton"").prop(""disabled"", false);
                $(""#usersSearchButton"").css(""background-color"", ""#007bff"");
                $(""#usersSearchButton"").css(""border-color"", ""#007bff"");
            }
            else {
                $(""#usersSearchButton"").prop(""disabled"", true);
                $(""#usersSearchButton"").css(""background-color"", ""grey"");
                $(""#usersSearchButton"").css(""border-color"", ""grey"");
            }
        });
    });

    function deleteUser(element) {
        var userId = $(element).data(""row-id"");
        var firstName = $(element).data(""first-name"");
        var lastName = $(element).data(""last-name"");
        var rowToRemove = $(""");
            WriteLiteral("#userRowId_\" + userId);\r\n\r\n        if (userId != \"\") {\r\n            if (confirm(\"האם אתם בטוחים שאתם רוצים למחוק את המשתמש: \" + firstName + \" \" + lastName)) {\r\n                $.ajax({\r\n                    url: \"");
#nullable restore
#line 171 "C:\Users\Nik\source\repos\WorkManagement\Views\Users\SearchUsers.cshtml"
                     Write(string.Format("{0}{1}", DomainHelper.BaseDomainUrl, Url.Action("DeleteUser", "Users")));

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    type: ""delete"",
                    data: {
                        userId: parseInt(userId)
                    },
                    success: function (result) {
                        if (result.data != null) {
                            if (result.errorDesc != null && result.errorDesc != """") {
                                $(usersError).text(result.errorDesc);
                                $(usersError).css(""visibility"", ""visible"");
                            }
                            else if (result.data) {
                                $(rowToRemove).remove();
                            }
                        }
                        else if (result.errorDesc != null && result.errorDesc != """") {
                            $(usersError).text(result.errorDesc);
                            $(usersError).css(""visibility"", ""visible"");
                        }
                    }
                });
            }
        }
    };
</script>");
            WriteLiteral(@"

<script type=""text/x-jquery-tmpl"" id=""usersTableRow"">
    <tr id=""userRowId_${userId}"">
        <td class=""td-style"">${userId}</td>
        <td class=""td-style"">${phoneNumber}</td>
        <td class=""td-style"">${firstName}</td>
        <td class=""td-style"">${lastName}</td>
        <td class=""td-style"" style=""{{if active }} background-color:green {{else}} background-color:red {{/if}};"">{{if active }} כן {{else}} לא {{/if}}</td>
        <td class=""td-style"" style=""{{if isAdmin }} background-color:green {{else}} background-color:red {{/if}};"">{{if isAdmin }} כן {{else}} לא {{/if}}</td>
        <td class=""td-style"">
            <input type=""button"" 
                   value=""מחק"" 
                   class=""btn-danger"" 
                   data-row-id=""${userId}"" 
                   data-first-name=""${firstName}"" 
                   data-last-name=""${lastName}""
                   onclick=""deleteUser($(this));"" />
        </td>
    </tr>
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<WorkManagement.Models.Shared.SessionHelper> Html { get; private set; }
    }
}
#pragma warning restore 1591
